<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ENTRAP</title>
    <style>
        body {
            background-color: #000;
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Courier New', monospace;
            color: #0f0;
        }

        /* 1. The Container: Holds the screen and status text */
        #screen_container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
        }

        /* 2. The Screen: Forces 4:3 Aspect Ratio & Fits in Window */
        canvas {
            display: block;
            /* Maximum size while staying within window */
            max-width: 100vw;
            max-height: 100vh;
            /* Keep pixels sharp */
            image-rendering: pixelated;
            /* nice glow effect */
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.2);
        }

        #status {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px 20px;
            border: 1px solid #0f0;
            z-index: 10;
            border-radius: 4px;
            pointer-events: none;
            font-size: 14px;
        }
    </style>
</head>
<body>

    <div id="screen_container">
        <div id="status">Initializing...</div>
        <canvas id="screen"></canvas>
    </div>

    <script src="https://unpkg.com/v86@latest/build/libv86.js"></script>

    <script>
        const CHUNK_PREFIX = "win95_chunk_";
        
        window.onload = async function() {
            var statusElement = document.getElementById("status");

            try {
                // --- STEP 1: LOAD CHUNKS ---
                statusElement.innerText = "Loading System Files...";
                var buffers = [];
                // Check chunks 'aa' through 'at'
                var suffixes = ["aa","ab","ac","ad","ae","af","ag","ah","ai","aj","ak","al","am","an","ao","ap","aq","ar","as","at"]; 
                
                for (let i = 0; i < suffixes.length; i++) {
                    try {
                        let response = await fetch(CHUNK_PREFIX + suffixes[i]);
                        if (!response.ok) break;
                        let blob = await response.arrayBuffer();
                        buffers.push(blob);
                    } catch (e) { break; }
                }

                if (buffers.length === 0) throw new Error("System files missing. Did you upload win95_chunk_aa?");

                // Create hard drive in memory
                const finalBlob = new Blob(buffers);
                const fileURL = URL.createObjectURL(final
